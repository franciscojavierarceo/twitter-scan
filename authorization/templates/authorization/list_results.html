{% extends "authorization/base.html" %}

{% block maincontent %}
    <div class="container">
<table class="table table-bordered">
  <thead>
  <p class="lead mb-4">Here's a list of the twitter users you've searched.</p>
    <tr>
      <th class="col">Twitter User</th>
      <th class="col">Toxicity Score [0,100%]</th>
      <th class="col">Tweet</th>
    </tr>
  </thead>
  <tbody>
    {% for tweet in object_list %}
      <tr>
        <td class="col"><a href="https://twitter.com/{{tweet.twitter_username}}">@{{tweet.twitter_username}}</a></td>
        <td class="col">{{tweet.toxicity_score}}%</td>
        <td class="col">
            <a href="#" onclick="showTweet('{{tweet.twitter_username}}-{{tweet.tweet_id}}');" id="{{tweet.twitter_username}}-{{tweet.tweet_id}}-text">Show Tweet</a>
            <div style="display:none" id="{{tweet.twitter_username}}-{{tweet.tweet_id}}">
                <blockquote class="twitter-tweet">
                    <a href="https://twitter.com/x/status/{{tweet.tweet_id}}"></a>
                </blockquote>
            </div>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% if is_paginated %}
  <ul class="pagination">
    {% if page_obj.has_previous %}
        <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.previous_page_number }}">&laquo;</a>
        </li>
    {% else %}
        <li class="page-item disabled">
            <a class="page-link">&laquo;</a>
        </li>
    {% endif %}

    {% if page_obj.number|add:'-4' > 1 %}
        <li><a class="page-link" href="?page=1">1</a></li>
        <li><a class="page-link" href="?page={{ page_obj.number|add:'-3' }}">&hellip;</a></li>
    {% endif %}

    {% for i in paginator.page_range %}
        {% if page_obj.number == i %}
            <li class="page-item active">
                <a class="page-link"><span>{{ i }}<span class="sr-only"></span></span></a>
            </li>
        {% elif i > page_obj.number|add:'-3' and i < page_obj.number|add:'3' %}
            <li class="page-item">
                <a class="page-link" href="?page={{ i }}">{{ i }}</a>
            </li>
        {% endif %}
    {% endfor %}

    {% if page_obj.paginator.num_pages > page_obj.number|add:'4' %}
        <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.number|add:'5' }}">&hellip;</a>
        </li>
        <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.paginator.count }}">
                {{ page_obj.paginator.count }}
            </a>
        </li>
    {% endif %}

    {% if page_obj.has_next %}
      <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.next_page_number }}">&raquo;</a>
      </li>
    {% else %}
      <li class="page-item disabled">
          <a class="page-link"><span>&raquo;</span></a>
      </li>
    {% endif %}
  </ul>
{% endif %}
</div>

    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        <script>
            function showTweet(tweetid) {
                var T = document.getElementById(tweetid)
                if (T.style.display == 'none') {
                    T.style.display = "block";
                    var t2 = document.getElementById(tweetid + '-text')
                    t2.innerHTML = 'Hide Tweet';
                } else {
                    T.style.display = "none";
                    var t2 = document.getElementById(tweetid + '-text')
                    t2.innerHTML = 'Show Tweet';
                }
            }
        </script>

{% endblock %}
